# ADR-0007: Поиск и фильтрация проектов: отдельный поисковый индекс

- Статус: Accepted
- Дата: 2025-12-25
- Контекст проекта: Платформа для краудфандинга (авторы проектов, бэкеры/спонсоры, администраторы, потенциальные инвесторы)


## Контекст
Нужен быстрый поиск по названию, тегам, категориям, регионам, статусам, диапазонам суммы/даты, а также сортировки (популярное, новое, близко к цели).

## Решение
- Основные данные проектов живут в PostgreSQL.
- Для поиска используем отдельный индекс (OpenSearch/Elasticsearch).
- Индекс обновляется асинхронно через события (`ProjectPublished`, `ProjectUpdated`, `ProjectStatusChanged`).
- Фильтры/фасеты рассчитываются на стороне поискового движка.

## Обоснование
- **Требования по поиску/фильтрам**: фасеты, сортировки и релевантность лучше обеспечиваются поисковыми движками.
- **Снижение нагрузки на БД**: поиск не конкурирует с транзакционными операциями (платежи/статусы) за ресурсы PostgreSQL.
- **Гибкость улучшений**: можно добавлять синонимы, автодополнение, boosting без изменения доменной схемы.

## Альтернативы
1) Только SQL LIKE/FTS  
   + проще инфраструктура  
   − хуже релевантность, сложнее фасеты и сложные сортировки, падает производительность на росте.

2) Встроенный поиск в БД (PostgreSQL FTS) как единственный  
   + хороший компромисс  
   − сложнее масштабировать и поддерживать расширенные сценарии (синонимы, подсказки).

## Последствия
+ Быстрый поиск и развитые фильтры для UX.  
+ Можно улучшать релевантность без изменения доменной модели.  
− Нужно поддерживать консистентность индекса (reindex, мониторинг лагов).
