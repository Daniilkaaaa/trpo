# ADR-0011: Развертывание и наблюдаемость: контейнеры + CI/CD + централизованные логи

- Статус: Accepted
- Дата: 2025-12-25
- Контекст проекта: Платформа для краудфандинга (авторы проектов, бэкеры/спонсоры, администраторы, потенциальные инвесторы)


## Контекст
Высокая доступность и минимизация простоя требуют повторяемых деплоев, мониторинга и быстрого отката.

## Решение
- Контейнеризация (Docker).
- CI/CD:
  - линт/тесты,
  - сборка образов,
  - миграции БД в контролируемом шаге,
  - деплой (Kubernetes/Compose — зависит от масштаба).
- Наблюдаемость:
  - централизованные логи (ELK/Opensearch),
  - метрики (Prometheus),
  - трассировка (OpenTelemetry),
  - алерты по SLO (ошибки платежей, задержки webhook, очередь).

## Обоснование
- **Высокая доступность**: повторяемые деплои и мониторинг снижают простои и ускоряют восстановление.
- **Критичность платежей**: алерты по вебхукам/ошибкам оплаты — обязательны, иначе платформа теряет деньги и доверие.
- **Масштабируемость команды**: CI/CD и наблюдаемость позволяют нескольким разработчикам безопасно выпускать изменения.

## Альтернативы
1) Ручные деплои на сервер  
   − высокий риск ошибок, долгие релизы.

2) Без трассировки  
   − сложно дебажить проблемы в интеграциях (платежи/почта/очереди).

## Последствия
+ Предсказуемые релизы, быстрый rollback.  
+ Раннее обнаружение проблем, особенно в платежах.  
− Потребуется настройка инфраструктуры и дисциплина по метрикам/логам.
