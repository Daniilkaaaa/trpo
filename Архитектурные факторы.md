***
# Архитектурные факторы платформы краудфандинга
***

## 1. Введение

Данный документ определяет ключевые архитектурные факторы (Architectural Drivers), формирующие облик будущей краудфандинговой платформы. Эти факторы являются результатом сбора и анализа функциональных и нефункциональных требований, бизнес-целей и технических ограничений.

Цель документа — зафиксировать *почему* система строится именно так, и обеспечить команду единым пониманием приоритетов при принятии архитектурных решений.

***

## 2. Словарь терминов

| Термин | Определение |
| **Автор** | Пользователь, создающий проект для сбора средств |
| **Спонсор (Бэкер)** | Пользователь, финансирующий проекты |
| **All-or-Nothing (AoN)** | Модель, при которой средства переводятся автору только при сборе 100% цели |
| **Keep-it-All (KiA)** | Модель, при которой автор получает все собранные средства вне зависимости от достижения цели |
| **MVP** | Минимально жизнеспособный продукт для выхода на рынок |
| **PCI DSS** | Стандарт безопасности индустрии платежных карт |
| **Bounded Context** | Паттерн DDD, обозначающий границы доменной модели |
| **CQRS** | Command Query Responsibility Segregation — разделение операций чтения и записи |
| **RPO** | Recovery Point Objective — максимально допустимая потеря данных |
| **RTO** | Recovery Time Objective — время восстановления после сбоя |

***

## 3. Функциональные требования

### 3.1 F01: Модуль управления пользователями и профилями
* Регистрация, аутентификация, верификация пользователей
* Создание профилей авторов и спонсоров
* Настройки приватности и уведомлений

### 3.2 F02: Модуль создания и управления проектами
* Создание, редактирование, публикация проектов
* Установка финансовых целей, сроков, уровней вознаграждений
* Модерация проектов перед публикацией

### 3.3 F03: Механизм сбора средств и платежей
* Интеграция с платежными системами (карты, электронные кошельки)
* Поддержка моделей финансирования (All-or-Nothing, Keep-it-All)
* Управление вознаграждениями и их выполнением

### 3.4 F04: Система отчетности о ходе выполнения
* Публикация обновлений проекта (текст, фото, видео)
* Финансовая отчетность о расходовании средств
* Итоговые отчеты по завершении проекта

### 3.5 F05: Модуль коммуникации и сообществ
* Комментарии к проектам
* Личные сообщения между авторами и спонсорами
* Q&A сессии, живые трансляции

### 3.6 F06: Поиск и рекомендательная система
* Расширенный поиск и фильтрация проектов
* Персонализированные рекомендации
* Категоризация и тегирование

### 3.7 F07: Система рейтингов и отзывов
* Оценка проектов и авторов
* Верификация спонсоров
* Отзывы о полученных вознаграждениях

### 3.8 F08: Административный интерфейс
* Модерация контента и пользователей
* Управление платежами и комиссиями
* Аналитика и отчетность по платформе

### 3.9 F09: Аналитические и BI инструменты
* Дашборды успешности проектов
* Статистика по категориям, регионам, демографии
* Прогнозирование успеха проектов

### 3.10 F10: Маркетинг и интеграции
* Интеграция с социальными сетями
* Реферальные программы
* Email-рассылки и уведомления

### 3.11 F11: Модуль уведомлений
* Push-уведомления о важных событиях
* Email-оповещения о статусе проектов
* SMS-уведомления для критических действий

***

## 4. Нефункциональные требования

### 4.1 PER: Производительность (Performance)
* **PER01:** Время загрузки страницы проекта ≤ 1.5 секунды
* **PER02:** Обработка платежных транзакций ≤ 2 секунды
* **PER03:** Поиск и фильтрация проектов ≤ 1 секунда
* **PER04:** Поддержка 50 000 одновременных пользователей во время популярных кампаний

### 4.2 SCA: Масштабируемость (Scalability)
* **SCA01:** Ожидаемая нагрузка на старте: 1000 активных проектов, 10 000 пользователей
* **SCA02:** Через 1 год: 5000 активных проектов, 100 000 пользователей
* **SCA03:** Через 3 года: 50 000 проектов, 1 млн пользователей
* **SCA04:** Возможность горизонтального масштабирования компонентов независимо

### 4.3 AVA: Доступность (Availability)
* **AVA01:** Доступность 99.95% (максимум 4.38 часа простоя в год)
* **AVA02:** Окно техобслуживания: 04:00-06:00 по основному часовому поясу
* **AVA03:** Резервирование критических компонентов (платежи, аутентификация)
* **AVA04:** Геораспределение для снижения латентности

### 4.4 SEC: Безопасность (Security)
* **SEC01:** PCI DSS compliance для обработки платежей
* **SEC02:** Двухфакторная аутентификация для авторов и крупных спонсоров
* **SEC03:** Шифрование данных в rest и transit (TLS 1.3+)
* **SEC04:** Регулярные пентесты и аудит безопасности
* **SEC05:** Защита от мошеннических проектов и схем

### 4.5 DUR: Надежность и сохранность данных (Durability)
* **DUR01:** Автоматическое ежедневное резервное копирование
* **DUR02:** RPO (Recovery Point Objective) ≤ 15 минут
* **DUR03:** RTO (Recovery Time Objective) ≤ 1 часа
* **DUR04:** Транзакционная целостность финансовых операций

### 4.6 MON: Мониторинг и observability
* **MON01:** Мониторинг бизнес-метрик (конверсия, сборы, комиссии)
* **MON02:** APM (Application Performance Monitoring) для всех сервисов
* **MON03:** Логирование всех финансовых транзакций
* **MON04:** Alerting для аномальной активности

### 4.7 COM: Соответствие регуляторным требованиям (Compliance)
* **COM01:** Соответствие GDPR, CCPA для международной аудитории
* **COM02:** KYC (Know Your Customer) для крупных транзакций
* **COM03:** AML (Anti-Money Laundering) политики
* **COM04:** Локальные требования стран присутствия (например, 152-ФЗ для РФ)

### 4.8 L10N: Локализация и интернационализация
* **L10N01:** Поддержка минимум 5 языков на старте (EN, ES, FR, DE, RU)
* **L10N02:** Мультивалютность: USD, EUR, GBP, CAD, AUD, локальные валюты
* **L10N03:** Локализованные платежные шлюзы для разных регионов

### 4.9 UX: Пользовательский опыт
* **UX01:** PWA (Progressive Web App) для десктопа и мобильных устройств
* **UX02:** Нативные мобильные приложения (iOS, Android)
* **UX03:** Поддержка screen readers и accessibility standards (WCAG 2.1 AA)
* **UX04:** Адаптивный дизайн для всех типов устройств

### 4.10 SEO: Маркетинг и поисковая оптимизация
* **SEO01:** SSR (Server-Side Rendering) для страниц проектов
* **SEO02:** Structured data markup для проектов
* **SEO03:** Sitemaps и robots.txt оптимизация
* **SEO04:** Скорость загрузки Core Web Vitals ≥ 90/100

***

## 5. Ограничения

* **LIM01:** Бюджет на разработку MVP (12 месяцев): $500,000
* **LIM02:** Срок выхода на рынок MVP: 9 месяцев
* **LIM03:** Минимальная команда на старте:
  * 1 Product Manager
  * 1 Tech Lead/Architect
  * 4 Backend разработчика
  * 3 Frontend разработчика (2 web, 1 mobile)
  * 2 QA инженера
  * 1 UX/UI дизайнер
  * 1 DevOps/SRE
* **LIM04:** Первоначальная поддержка только 3 платежных систем
* **LIM05:** Хранение финансовых данных минимум 7 лет (требование регуляторов)
* **LIM06:** Комиссия платформы фиксирована на первые 2 года
* **LIM07:** Модерация проектов в ручном режиме на старте
* **LIM08:** Поддержка только облачной инфраструктуры (не on-premise)
* **LIM09:** Минимальный возраст пользователей: 18 лет

***

## 6. Принципы архитектуры

### 6.1 PRN01: Trust by Design
* Прозрачность и безопасность как основа архитектуры
* Требования безопасности встраиваются на всех уровнях, а не добавляются постфактум
* Аудит всех критических операций

### 6.2 PRN02: Event-Driven Architecture
* Все значимые события (платежи, обновления, верификация) генерируются и публикуются как события
* Асинхронная обработка для слабого связывания сервисов
* Гарантированная доставка событий

### 6.3 PRN03: Microservices with Bounded Contexts
* Разделение на доменные сервисы в соответствии с границами контекстов:
  * Сервис пользователей
  * Сервис проектов
  * Сервис платежей
  * Сервис аналитики
  * Сервис коммуникаций
  * Сервис модерации
* Независимое развертывание и масштабирование сервисов

### 6.4 PRN04: API-First
* Все сервисы общаются через четко определенные API
* Документирование API в формате OpenAPI/Swagger
* Версионирование API с обратной совместимостью

### 6.5 PRN05: Data Residency
* Соблюдение требований к хранению данных по регионам
* Данные пользователей хранятся в юрисдикции сбора
* Возможность географического шардирования

### 6.6 PRN06: Graceful Degradation
* Система остается частично работоспособной при сбоях компонентов
* Падение некритичных сервисов не влияет на платежи и аутентификацию
* Кэширование статических данных при недоступности бэкенда

### 6.7 PRN07: CQRS
* Разделение потоков записи и чтения для высоконагруженных сценариев
* Оптимизация моделей чтения под конкретные представления
* Согласованность данных через событийную синхронизацию

### 6.8 PRN08: Compliance as Code
* Требования регуляторов реализованы в коде и конфигурациях
* Автоматизированная проверка compliance при CI/CD
* Версионирование политик и правил соответствия

***